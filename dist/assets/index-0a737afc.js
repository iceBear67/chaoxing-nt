import"./base-82955267.js";/* empty css                     */import{E as J}from"./el-progress-fd159002.js";import{E as Q}from"./el-popper-548470bb.js";import{a as X,r as k,H as Y,o as Z,b as d,e as t,m,f as r,h as i,w as u,v as g,I as b,k as ee,l as c,F as A,g as H,p as w,i as oe,y as L,_ as se,q as te}from"./index-26603ea5.js";import{u as y}from"./index-46519fef.js";import{_ as I}from"./lodash-4dfbea43.js";import{T as M}from"./index-b0b4f58c.js";import{E as ne}from"./index-853a0f6e.js";import"./index-952b158c.js";import"./index-15f48857.js";import"./_baseGet-ad9634b7.js";import"./index-12f9ba11.js";import"./aria-60e0cdc6.js";import"./index-9c66cebd.js";import"./index-08289d2b.js";import"./index-57013d5d.js";import"./constants-84857360.js";import"./_commonjsHelpers-de833af9.js";import"./index.vue_vue_type_style_index_0_lang-dfb9c5c0.js";import"./index-94663b0f.js";const le=""+new URL("audio-a57bc184.svg",import.meta.url).href,ie=""+new URL("b-637d1282.svg",import.meta.url).href,ae=""+new URL("epub-be72167a.svg",import.meta.url).href,re=""+new URL("excel-f50a92ed.svg",import.meta.url).href,ce=""+new URL("exe-4e02ea6e.svg",import.meta.url).href,de=""+new URL("flash-41210937.svg",import.meta.url).href,_e=""+new URL("folder-9e101097.svg",import.meta.url).href,ve=""+new URL("link-19b8d4ed.svg",import.meta.url).href,pe=""+new URL("none-266e1513.svg",import.meta.url).href,fe=""+new URL("other-6c3d1ef4.svg",import.meta.url).href,he=""+new URL("pdf-7f53d6ce.svg",import.meta.url).href,ue=""+new URL("pdz-79edd43b.svg",import.meta.url).href,ge=""+new URL("ppt-c55b76dc.svg",import.meta.url).href,we=""+new URL("rar-a8bc4e93.svg",import.meta.url).href,me=""+new URL("shareFolder-e679bb5b.svg",import.meta.url).href,be=""+new URL("ti-093e4987.svg",import.meta.url).href,Ie=""+new URL("txt-85e9b6b5.svg",import.meta.url).href,ye=""+new URL("video-4b72b83f.svg",import.meta.url).href,ke=""+new URL("word-946bcb18.svg",import.meta.url).href,U=""+new URL("folder-9e101097.svg",import.meta.url).href,Le={class:"header"},Ce={class:"header_name"},De={class:"name"},xe={class:"empty"},Ee={class:"empty_tip"},Re={class:"download_now"},Se={class:"download_now_header"},Te={class:"title"},Ae=["onMouseenter","onMouseleave"],He={class:"file_content"},Me={class:"file_icon"},Ue={key:0,src:U,class:"file_icon"},Ve=["src"],ze={class:"file_res"},Fe=["title"],Oe={class:"size_speed"},We={class:"file_size"},Ne={key:0,class:"file_speed"},Be={key:1,class:"download_fail"},$e={key:2},je={key:3},Ge={class:"operate_icon"},Pe=["onClick"],qe=["onClick"],Ke=["onClick"],Je=["onClick"],Qe={class:"progress"},Xe={class:"download_finish"},Ye={class:"download_finish_header"},Ze={class:"title"},eo=["onMouseenter","onMouseleave","onClick"],oo={class:"file_content"},so={class:"file_icon"},to={key:0,src:U,class:"file_icon"},no=["src"],lo={class:"file_res"},io=["title"],ao={class:"size_speed"},ro={class:"operate_icon"},co=["onClick"],_o=["onClick"],vo=X({__name:"index",setup(po){const V=k(),n=Y.global.t,l=k([]),_=k([]);Z(()=>{console.log("进入下载页面"),x(),N()});const z=e=>{window.MainWindowHelper.openDownloadFile(e.id).then(s=>{console.log(s),s===-1&&M({content:n("header.foldednotexist"),zIndex:2024,duration:1e3})})},F=(e,s)=>e/s*100,C=()=>{if(l.value.length>0)return l.value.every(s=>s.state===3)},O=()=>{window.close()};window.RendererHelper.on("CLOSE_MAIN_WINDOW",()=>{window.close()});const W=()=>y.matchType,D=e=>new URL(Object.assign({"./images/fileIcons/audio.svg":le,"./images/fileIcons/b.svg":ie,"./images/fileIcons/epub.svg":ae,"./images/fileIcons/excel.svg":re,"./images/fileIcons/exe.svg":ce,"./images/fileIcons/flash.svg":de,"./images/fileIcons/folder.svg":_e,"./images/fileIcons/link.svg":ve,"./images/fileIcons/none.svg":pe,"./images/fileIcons/other.svg":fe,"./images/fileIcons/pdf.svg":he,"./images/fileIcons/pdz.svg":ue,"./images/fileIcons/ppt.svg":ge,"./images/fileIcons/rar.svg":we,"./images/fileIcons/shareFolder.svg":me,"./images/fileIcons/ti.svg":be,"./images/fileIcons/txt.svg":Ie,"./images/fileIcons/video.svg":ye,"./images/fileIcons/word.svg":ke})[`./images/fileIcons/${W()(e)}.svg`],self.location).href,x=async()=>{await window.MainWindowHelper.loadDownloadList().then(e=>{_.value=e==null?void 0:e.filter(s=>s.state==4),_.value.forEach(s=>{s.hoverVisible=!1}),_.value.sort(function(s,f){return f.finshTime-s.finshTime}),l.value=e==null?void 0:e.filter(s=>s.state!==4),l.value.forEach(s=>{s.hoverVisible=!1}),l.value.sort(function(s,f){return f.startTime-s.startTime}),console.log("下载",l.value)})};let v;const N=()=>{window.RendererHelper.on("downloadChannel",e=>{var s,f;console.log("downloadChannel",e),e.type==="downloadListChanged"&&(l.value=((s=e.data)==null?void 0:s.filter(a=>a.state!==4))||[],l.value.forEach(a=>{a.hoverVisible=!1}),l.value.sort(function(a,h){return h.startTime-a.startTime}),_.value=e==null?void 0:e.data.filter(a=>a.state==4),_.value.forEach(a=>{a.hoverVisible=!1}),_.value.sort(function(a,h){return h.finshTime-a.finshTime})),e.type==="downloadStateChanged"&&(x(),v=[e.data.resId||e.data.objectId],window.RendererHelper.sendToView("CHANGE_DOWNLOAD_FILE_STATE","tab_message",{type:"start",resIds:I.cloneDeep(v)})),e.type==="downloadProgressChanged"&&((f=l.value)==null||f.forEach((a,h)=>{a.id===e.data.id&&(l.value[h].downloadSpeed=e.data.downloadSpeed,l.value[h].remainder=e.data.remainder,l.value[h].receivedBytes=e.data.receivedBytes)}))})},E=e=>{e.hoverVisible=!0},R=e=>{e.hoverVisible=!1},B=e=>{window.MainWindowHelper.pauseDownload([e.id]),e.hoverVisible=!0},S=e=>{window.MainWindowHelper.resumeDownload([e.id]),e.hoverVisible=!0,v=[e.resId||e.objectId],window.RendererHelper.sendToView("CHANGE_DOWNLOAD_FILE_STATE","tab_message",{type:"start",resIds:I.cloneDeep(v)})},T=e=>{window.MainWindowHelper.deleteDownload([e.id],!1),v=[e.resId||e.objectId],window.RendererHelper.sendToView("CHANGE_DOWNLOAD_FILE_STATE","tab_message",{type:"delete",resIds:I.cloneDeep(v)})},$=e=>{window.MainWindowHelper.showItemInFolder(e).then(s=>{console.log(s),s===-1&&M({content:n("header.foldednotexist"),zIndex:2024,duration:1e3})})},j=()=>{let e=l.value.filter(s=>s.state===2||s.state===6).map(s=>s.id);window.MainWindowHelper.resumeDownload(e),v=_.value.map(s=>s.resId||s.objectId),window.RendererHelper.sendToView("CHANGE_DOWNLOAD_FILE_STATE","tab_message",{type:"start",resIds:I.cloneDeep(v)})},G=()=>{let e=l.value.filter(s=>s.state===3).map(s=>s.id);window.MainWindowHelper.pauseDownload(e)},P=()=>{let e=_.value.map(s=>s.id);v=_.value.map(s=>s.resId||s.objectId),window.MainWindowHelper.deleteDownload(e,!1),window.RendererHelper.sendToView("CHANGE_DOWNLOAD_FILE_STATE","tab_message",{type:"delete",resIds:I.cloneDeep(v)})};function q(e){switch(e){case"ENOSPC":return n("header.noSpace");default:return n("header.failDownload")}}return(e,s)=>{const f=se,a=Q,h=J,K=ne;return c(),d("div",{ref_key:"contanier",ref:V,class:"download_center",tabindex:"1"},[t("div",Le,[t("div",Ce,[m(f,{"icon-class":"download",width:"18px",height:"18px",color:"#3A8BFF"}),t("div",De,r(i(n)("header.myDownloadcen")),1)]),t("div",{class:"close",onClick:O},[m(f,{"icon-class":"close_download_center",width:"15px",height:"15px",color:"#3A8BFF"})])]),t("div",{class:"content",style:ee({maxHeight:"380px",marginLeft:l.value.length==0&&_.value.length==0?"0px":""})},[u(t("div",xe,[t("div",Ee,r(i(n)("header.downloadAvailable")),1)],512),[[g,l.value.length==0&&_.value.length==0]]),m(K,{ref:"atscrollbar","max-height":"380px"},{default:b(()=>[t("div",Re,[u(t("div",Se,[t("div",Te,r(i(n)("header.Downloading")),1),u(t("div",{class:"start_btn",onClick:j},r(i(n)("header.startAll")),513),[[g,!C()]]),u(t("div",{class:"start_btn",onClick:G},r(i(n)("header.pauseAll")),513),[[g,C()]])],512),[[g,l.value.length>0]]),(c(!0),d(A,null,H(l.value,o=>(c(),d("div",{class:"download_list",key:o.id,onMouseenter:p=>E(o),onMouseleave:p=>R(o)},[t("div",He,[t("div",Me,[o.type==1||o.type==5?(c(),d("img",Ue)):(c(),d("img",{key:1,src:D(o.title),class:"file_icon"},null,8,Ve))]),t("div",ze,[t("div",{class:"file_name",title:o.title},r(o.title),9,Fe),t("div",Oe,[t("div",We,r(o.totalSize?i(y).formatSize(o.totalSize):"0B"),1),o.state==3?(c(),d("div",Ne,r(i(n)("header.Downloading"))+r(o.downloadSpeed==-1||o.downloadSpeed===void 0?"0KB":i(y).formatSize(o.downloadSpeed))+"/S",1)):w("",!0),o.state==6?(c(),d("div",Be,r(q(o==null?void 0:o.errorCode)),1)):w("",!0),o.state==2?(c(),d("div",$e,r(i(n)("header.Paused")),1)):w("",!0),o.state==1||o.state==9?(c(),d("div",je,r(i(n)("header.waitingdownload")),1)):w("",!0)])]),u(t("div",Ge,[o.state==1||o.state==3?(c(),d("i",{key:0,class:"stop_once",onClick:p=>B(o)},null,8,Pe)):w("",!0),o.state==2||o.state==8?(c(),d("i",{key:1,class:"start_once",onClick:p=>S(o)},null,8,qe)):w("",!0),o.state==6?(c(),oe(a,{key:2,class:"box-item",effect:"dark",content:i(n)("header.reDownload"),placement:"top","hide-after":"0"},{default:b(()=>[o.state==6?(c(),d("i",{key:0,class:"refresh_once",onClick:p=>S(o)},null,8,Ke)):w("",!0)]),_:2},1032,["content"])):w("",!0),m(a,{class:"box-item",effect:"dark",content:o.state==3||o.state==2?i(n)("header.cancelDownload"):i(n)("setting.delete"),placement:"top","hide-after":"0"},{default:b(()=>[t("i",{class:"del_once",onClick:p=>T(o)},null,8,Je)]),_:2},1032,["content"])],512),[[g,o.hoverVisible]])]),t("div",Qe,[m(h,{strokeWidth:3,percentage:F(o.receivedBytes,o.totalSize)},null,8,["percentage"])])],40,Ae))),128))]),t("div",Xe,[u(t("div",Ye,[t("div",Ze,r(i(n)("header.succDownload")),1),t("div",{class:"clean_btn",onClick:P},r(i(n)("setting.empty")),1)],512),[[g,_.value.length>0]]),(c(!0),d(A,null,H(_.value,o=>(c(),d("div",{class:"download_list",key:o.id,onMouseenter:p=>E(o),onMouseleave:p=>R(o),onClick:L(p=>z(o),["stop"])},[t("div",oo,[t("div",so,[o.type==1||o.type==5?(c(),d("img",to)):(c(),d("img",{key:1,src:D(o.title),class:"file_icon"},null,8,no))]),t("div",lo,[t("div",{class:"file_name",title:o.title},r(o.title),9,io),t("div",ao,[u(t("div",{class:"file_size"},r(o.totalSize?i(y).formatSize(o.totalSize):"0B"),513),[[g,!o.hoverVisible]]),u(t("div",{class:"file_size"},r(i(n)("header.clickopen")),513),[[g,o.hoverVisible]])])]),u(t("div",ro,[m(a,{class:"box-item",effect:"dark",content:i(n)("header.openfolder"),placement:"top","hide-after":"0"},{default:b(()=>[t("i",{class:"open_file",onClick:L(p=>$(o.id),["stop"])},null,8,co)]),_:2},1032,["content"]),m(a,{class:"box-item",effect:"dark",content:i(n)("setting.delete"),placement:"top","hide-after":"0"},{default:b(()=>[t("i",{class:"del_once",onClick:L(p=>T(o),["stop"])},null,8,_o)]),_:2},1032,["content"])],512),[[g,o.hoverVisible]])])],40,eo))),128))])]),_:1},512)],4)],512)}}});const Uo=te(vo,[["__scopeId","data-v-5d946f9f"]]);export{Uo as default};
