const o="updateMember";function W(e){return new Promise((r,n)=>{const{peopleList:P=[],inviteGroupMember:f=!1}=e;l(o),w(async i=>{if(l(o),Array.isArray(i)&&i.length>0){const u=i.filter(s=>!s.uid),m=u.map(s=>String(s.puid)),c=await I(m);if(c.success){const s=c.data,a=new Map;for(const t of s)a.set(t.puid,t.uid);for(const t of u){const d=a.get(t.puid);d&&(t.uid=d)}r(i)}else console.error("查询用户信息失败"),n("查询用户信息失败")}else r([])});const p=g({inviteGroupMember:f});window.RendererHelper.openWindow(p,{width:640,height:600,resizable:!1,frame:!1,modal:!0,subWindow:!0,id:"selectGroupMember"},P)})}function g(e){const{inviteGroupMember:r=!1}=e,n=new URLSearchParams({t:String(Date.now())});return r&&n.append("inviteGroupMember","1"),`https://im.chaoxing.com/res/studyChooseByPuid/index.html?${n.toString()}`}function l(e){window.RendererHelper.removeAllListeners(e)}function w(e){window.RendererHelper.on(o,e)}async function I(e){if(e==null||e.length===0)return{success:!0,errorMsg:"",data:[]};let r=[];try{return r=await window.RendererHelper.getUsersByPuids(e),{success:!0,data:r,errorMsg:""}}catch{return{success:!1,errorMsg:"查询用户信息失败",data:[]}}}export{W as o};
