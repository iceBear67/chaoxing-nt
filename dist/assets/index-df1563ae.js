import"./base-82955267.js";/* empty css                     */import{a as N,u as O,r as c,o as W,c as $,b as l,e as s,f as r,h as n,w as _,v as C,k as G,K as k,m as K,I as Z,l as t,F as j,g as z,y as S,p as b,i as q,j as v,q as J}from"./index-26603ea5.js";import{I as X,a as Q,_ as Y}from"./class-fce5a8f7.js";import{_ as ee}from"./inbox-09c94a1c.js";import{a as se}from"./avatar_group-d33fd388.js";import{s as oe,O as y,A as m}from"./message-fe5b63d1.js";import{E as ne}from"./index-853a0f6e.js";import"./avatar-d72faaaf.js";/* empty css                                                              */import"./index-9c66cebd.js";import"./index-15f48857.js";import"./_baseGet-ad9634b7.js";const ae=""+new URL("head-visitor-b02780f3.png",import.meta.url).href,te={class:"new_msg_header"},ie={class:"header_left"},le={class:"close_new_msg"},re={class:"label"},de={class:"set_input"},ce={class:"close_new_msg"},ge={class:"label"},_e={class:"set_input"},ue={class:"new_msg_content"},pe=["onMouseenter","onMouseleave","onClick"],ve=["src"],me={key:1,src:Q,alt:"",draggable:"false"},we={key:2,src:Y,alt:"",draggable:"false"},he={key:3,src:ae,alt:"",draggable:"false"},fe={key:4,src:ee,alt:"",draggable:"false"},Me={class:"msg_info"},Ce={class:"info"},be=["onClick"],ye={class:"new_msg_footer"},He=N({__name:"index",setup(ke){var H;const{t:u}=O(),x=c(),p=c(!1),d=c(!1),w=c(!1),i=c([]),h=c();i.value=(H=window.RendererHelper.getInitData())==null?void 0:H.msgList,console.log("[newMsgPop] msgData",oe(i.value)),window.MainWindowHelper.getAppSystemConfig().then(o=>{o&&(p.value=!o.messageReminder,d.value=o.isHideMessage??!1)}),W(async()=>{h.value=await window.MainWindowHelper.getLanguage(),console.log("[newMsgPop] appLanguage",h.value)});const A=$(()=>i.value.reduce((o,a)=>o+a.unreadCount,0)),T=o=>{o.hoverVisible=!0},I=o=>{o.hoverVisible=!1},V=()=>{console.log("isHideMessage",d.value),window.MainWindowHelper.setAppSystemConfig("isHideMessage",d.value)},E=()=>{window.MainWindowHelper.setAppSystemConfig("messageReminder",!p.value),window.close()},L=o=>{var e;i.value=(e=i.value)==null?void 0:e.filter(g=>g.id!==o.id),i.value.length===0&&window.close();let M=86+58*(i.value.length>3?3:i.value.length);window.MainWindowHelper.changeMessagePopHeight(M),window.RendererHelper.sendToView("HIDE_THIS_MESSAGE","tab_message",{isAllMessage:!1,id:o.id})},P=o=>{window.MainWindowHelper.openThisMessage({id:o}),window.close()},R=()=>{console.log("[newMsgPop] hideAllMessage");let o=i.value.map(a=>a.id);console.log("[newMsgPop] messageIdList",o.toString()),window.RendererHelper.sendToView("HIDE_THIS_MESSAGE","tab_message",{isAllMessage:!0,id:""}),window.close()};let f=null;const U=()=>{f=setTimeout(()=>{w.value=!1},300)},D=()=>{f&&clearTimeout(f)},B=()=>{setTimeout(()=>{window.close()},300)},F=()=>{window.RendererHelper.sendToMainProcess("_mouseEnterMessagePop")};return(o,a)=>{const M=ne;return t(),l("div",{class:"new_msg_pop",onMouseenter:F,onMouseleave:B},[s("div",te,[s("div",ie,[s("span",null,r(n(u)("message.newInfo")),1),s("span",null,"("+r(n(A))+")",1)]),s("div",{class:"header_right",ref_key:"setContanier",ref:x,tabindex:"1",onFocus:D,onBlur:U},[s("div",{class:"setting",onClick:a[0]||(a[0]=e=>w.value=!0)}),_(s("div",{class:"setting_content",style:G(h.value=="en_US"?{width:"240px"}:{})},[s("div",le,[s("span",re,r(n(u)("message.hideChatContent")),1),s("div",de,[_(s("input",{name:"isUsed",class:"mui-switch mui-switch-animbg",type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=e=>d.value=e),onChange:V},null,544),[[k,d.value]])])]),s("div",ce,[s("span",ge,r(n(u)("message.turnOff")),1),s("div",_e,[_(s("input",{name:"isUsed",class:"mui-switch mui-switch-animbg",type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=e=>p.value=e),onChange:E},null,544),[[k,p.value]])])])],4),[[C,w.value]])],544)]),s("div",ue,[K(M,{ref:"atscrollbar","max-height":"174px"},{default:Z(()=>[(t(!0),l(j,null,z(i.value,e=>(t(),l("div",{class:"msg_content",onMouseenter:g=>T(e),onMouseleave:g=>I(e),onClick:S(g=>P(e.id),["stop"])},[e.icon[0]==n(y).GROUP?(t(),l("img",{key:0,src:n(se),alt:"",draggable:"false"},null,8,ve)):b("",!0),e.icon[0]==n(y).CLASS?(t(),l("img",me)):e.icon[0]==n(y).COURSE?(t(),l("img",we)):e.icon[0]==n(m).ZHKF?(t(),l("img",he)):e.icon[0]==n(m).INBOX?(t(),l("img",fe)):(t(),q(X,{ref_for:!0,ref:"imgAvatorRef",key:e.id+e.title+e.icon.join(","),"img-list":e.icon},null,8,["img-list"])),s("div",Me,[s("div",Ce,[s("div",{class:v(["msg_name",[e.unreadCount>99?"msg_name_width":""]])},r(e.title),3),e.id!=n(m).ZHKF&&!d.value?(t(),l("div",{key:0,class:v(["msg_res",[e.unreadCount>99?"mag_res_width":""]])},r(e.content),3)):b("",!0),e.id!=n(m).ZHKF&&d.value?(t(),l("div",{key:1,class:v(["msg_res",[e.unreadCount>99?"mag_res_width":""]])},r(e.unreadCount)+"条消息 ",3)):b("",!0)]),_(s("div",{class:"hide_msg_content",onClick:S(g=>L(e),["stop"])},null,8,be),[[C,e.hoverVisible]]),_(s("div",{class:v(["mag_count",[e.unreadCount>99?"mag_counts":""]])},r(e.unreadCount>99?"99+":e.unreadCount),3),[[C,!e.hoverVisible]])])],40,pe))),256))]),_:1},512)]),s("div",ye,[s("div",{class:"igboreAll",onClick:R},r(n(u)("message.ignoreAll")),1)])],32)}}});const Fe=J(He,[["__scopeId","data-v-b83c42ab"]]);export{Fe as default};
