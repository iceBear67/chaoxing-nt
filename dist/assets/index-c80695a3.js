import{d as re,a as Y,s as oe,u as $,r as u,t as de,o as ee,n as ce,c as X,b as h,e as a,f as _,F as ue,g as we,h as w,i as Q,j as x,k as C,l as c,m as L,w as N,v as E,p as f,_ as te,q as ne,x as pe,y as P,z as ge,A as Ae,B as ve,C as me,D as he}from"./index-26603ea5.js";import{u as K}from"./index-46519fef.js";import"./base-82955267.js";import{E as _e}from"./el-progress-fd159002.js";import{_ as fe}from"./lodash-4dfbea43.js";import"./index-952b158c.js";import"./_commonjsHelpers-de833af9.js";const Se=()=>({sidebarStatus:localStorage.getItem("sidebarStatus")??"1"}),se=re({id:"app",state:Se,actions:{ToggleSideBar(){this.sidebarStatus=="1"?localStorage.setItem("sidebarStatus","0"):localStorage.setItem("sidebarStatus","1"),this.sidebarStatus=this.sidebarStatus=="1"?"0":"1"}}}),be={class:"aside_avator_img"},Re=["src"],ye={class:"aside_avator_name"},Te={class:"aside_menu"},Le=["onClick"],Me={key:1,class:x(["dot"])},Be={class:"right_hover_tool"},Ue=Y({__name:"index",props:{currentMenu:{type:Object,default:()=>{}},menuList:{type:Array,default:()=>[]}},emits:["openTab","initTab"],setup(I,{emit:i}){const M=I,B=se(),{sidebarStatus:d}=oe(B),{t:g}=$(),p=u(!0);p.value=window.RendererHelper.getPlatform()!="darwin";const{currentMenu:U,menuList:H}=de(M),t=u(0),S=u(0),b=u(),R=u(""),A=u({pic:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKpSURBVHgBtVZNbtNQEJ7xX1MctTZSabtL2XUXKrHoCvcG5QS9Apyg6Q1yBDgB3AB3gZBggZGQWCaVKqVKpMRNkzp1HD9mXhpoqjzbSuCToue8mTffm18bIQedTu9VmqaeEOghQoW2KveiUAgIAESAqL3b3nZ/ZNnBLILJRNTIuAcFQKS+rmNta8s9L0TUaDQc2944JQ/ewBJAFPXhUDvb23NDJVGr1aogrn0gL6qwGgLLwmPXdS9mG9rsgT35RySMahyLj41Gz5ltGLOHabjUJKO7GMLrIcTjMaSpgNKaBWW7RL91JZltp6e0vuU/MnTTyhK+6kR4PYCwP1woczZscDbLqqOgaehxgcjQCSFqKsXBMFKSyEuQjL1VgSuXV7y8bFdN0/iuUrxq9zINMUprJuw8e6qUs1eaZZknWUbySBjxOMmUpyl4FDqRWWUaIuSBiyMLlBpPy6o0hmUZkAcOXRZ4dHExOFlKzkYZ8lB+sp6nUtHyNEolS5aw+iI2lMu5RLJhm/B3Ii82Rn1i6DoMbiMqjrHMG4eUveWLFEBo0Jkm5amSp8m3LnLzRaABHVAxoA//H4GhaeBTnSvBfTQaxTJkyWQCSTKR+9SEYJmmDCHPO8tUV2eSwHvZJO129xOFz3tMwEO0SMMyeMg6m7ZcH4IjtrPjHsmqQ8TaTMDN1+31C42exxfjM93wZq6ByYEzXiURT1ciq3NYrjpd6A8iWBb9m1tpg22RN/XdXdf/Q8SgcJ91uv0gjhNYFWyDbUXR1Js5InrthlESv6ZABrAyRJCO8fjhd8PcZDh8sd+09OiIklaHZUEfJ5Z+d3Rw8Pxiblul/+XbL09HOKW0elDEPoA/ocQfvtz3FfJsfP76s2ro2gkKrApAmvTCuT/ZREFTBWUfnqsIZvgNl5on3QgDSKAAAAAASUVORK5CYII=",self.location).href,name:g("login")});ee(async()=>{window.RendererHelper.on("updateUser",r=>{q(r),setTimeout(()=>{r&&r.puid&&(A.value.pic=K.getUserAvatar({puid:r.puid}))},2e3)}),window.RendererHelper.getUser().then(r=>{q(r)}),window.RendererHelper.on("appLoginOut",()=>{A.value=Object.assign(A.value,{pic:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKpSURBVHgBtVZNbtNQEJ7xX1MctTZSabtL2XUXKrHoCvcG5QS9Apyg6Q1yBDgB3AB3gZBggZGQWCaVKqVKpMRNkzp1HD9mXhpoqjzbSuCToue8mTffm18bIQedTu9VmqaeEOghQoW2KveiUAgIAESAqL3b3nZ/ZNnBLILJRNTIuAcFQKS+rmNta8s9L0TUaDQc2944JQ/ewBJAFPXhUDvb23NDJVGr1aogrn0gL6qwGgLLwmPXdS9mG9rsgT35RySMahyLj41Gz5ltGLOHabjUJKO7GMLrIcTjMaSpgNKaBWW7RL91JZltp6e0vuU/MnTTyhK+6kR4PYCwP1woczZscDbLqqOgaehxgcjQCSFqKsXBMFKSyEuQjL1VgSuXV7y8bFdN0/iuUrxq9zINMUprJuw8e6qUs1eaZZknWUbySBjxOMmUpyl4FDqRWWUaIuSBiyMLlBpPy6o0hmUZkAcOXRZ4dHExOFlKzkYZ8lB+sp6nUtHyNEolS5aw+iI2lMu5RLJhm/B3Ii82Rn1i6DoMbiMqjrHMG4eUveWLFEBo0Jkm5amSp8m3LnLzRaABHVAxoA//H4GhaeBTnSvBfTQaxTJkyWQCSTKR+9SEYJmmDCHPO8tUV2eSwHvZJO129xOFz3tMwEO0SMMyeMg6m7ZcH4IjtrPjHsmqQ8TaTMDN1+31C42exxfjM93wZq6ByYEzXiURT1ciq3NYrjpd6A8iWBb9m1tpg22RN/XdXdf/Q8SgcJ91uv0gjhNYFWyDbUXR1Js5InrthlESv6ZABrAyRJCO8fjhd8PcZDh8sd+09OiIklaHZUEfJ5Z+d3Rw8Pxiblul/+XbL09HOKW0elDEPoA/ocQfvtz3FfJsfP76s2ro2gkKrApAmvTCuT/ZREFTBWUfnqsIZvgNl5on3QgDSKAAAAAASUVORK5CYII=",self.location).href,name:g("login")}),i("initTab")}),window.RendererHelper.on("updateMessageNum",r=>{console.debug("消息改变",r),t.value=r}),window.RendererHelper.on("updateHeadImg",r=>{b.value.src=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKpSURBVHgBtVZNbtNQEJ7xX1MctTZSabtL2XUXKrHoCvcG5QS9Apyg6Q1yBDgB3AB3gZBggZGQWCaVKqVKpMRNkzp1HD9mXhpoqjzbSuCToue8mTffm18bIQedTu9VmqaeEOghQoW2KveiUAgIAESAqL3b3nZ/ZNnBLILJRNTIuAcFQKS+rmNta8s9L0TUaDQc2944JQ/ewBJAFPXhUDvb23NDJVGr1aogrn0gL6qwGgLLwmPXdS9mG9rsgT35RySMahyLj41Gz5ltGLOHabjUJKO7GMLrIcTjMaSpgNKaBWW7RL91JZltp6e0vuU/MnTTyhK+6kR4PYCwP1woczZscDbLqqOgaehxgcjQCSFqKsXBMFKSyEuQjL1VgSuXV7y8bFdN0/iuUrxq9zINMUprJuw8e6qUs1eaZZknWUbySBjxOMmUpyl4FDqRWWUaIuSBiyMLlBpPy6o0hmUZkAcOXRZ4dHExOFlKzkYZ8lB+sp6nUtHyNEolS5aw+iI2lMu5RLJhm/B3Ii82Rn1i6DoMbiMqjrHMG4eUveWLFEBo0Jkm5amSp8m3LnLzRaABHVAxoA//H4GhaeBTnSvBfTQaxTJkyWQCSTKR+9SEYJmmDCHPO8tUV2eSwHvZJO129xOFz3tMwEO0SMMyeMg6m7ZcH4IjtrPjHsmqQ8TaTMDN1+31C42exxfjM93wZq6ByYEzXiURT1ciq3NYrjpd6A8iWBb9m1tpg22RN/XdXdf/Q8SgcJ91uv0gjhNYFWyDbUXR1Js5InrthlESv6ZABrAyRJCO8fjhd8PcZDh8sd+09OiIklaHZUEfJ5Z+d3Rw8Pxiblul/+XbL09HOKW0elDEPoA/ocQfvtz3FfJsfP76s2ro2gkKrApAmvTCuT/ZREFTBWUfnqsIZvgNl5on3QgDSKAAAAAASUVORK5CYII=",self.location).href,b.value.src=K.getUserAvatar({puid:r.puid}),setTimeout(()=>{ce(()=>{b.value.src=K.getUserAvatar({puid:r.puid})})},2e3)}),window.RendererHelper.onStoreDataChanged("new_download_count",r=>{S.value=r}),d.value=="0"&&window.MainWindowHelper.expandMainMenu(!1),R.value=await window.MainWindowHelper.getLanguage()});const s=r=>{i("openTab",r)},n=async()=>{window.MainWindowHelper.openLoginPage();const r=await window.RendererHelper.getMousePointInWindow(),D=await window.RendererHelper.getMousePointInScreen(),{width:W,height:y}=await window.RendererHelper.getScreenWorkArea(),J=D.x+340>W?r.x-340:r.x,j=D.y+200>y?r.y-200:r.y;window.MainWindowHelper.appIsLogin().then(async G=>{if(G){const k=await window.RendererHelper.getUser();k&&k.puid&&(A.value.pic=K.getUserAvatar({puid:String(k.puid)}),window.RendererHelper.openWindow("sview:/#/personalCard",{width:340,height:200,resizable:!1,marginLeft:J,marginTop:j,subWindow:!0,frame:!1,id:"id_PersonInfoWindow"},{puid:String(k.puid),myPuid:String(k.puid)}))}})},v=()=>{window.MainWindowHelper.expandMainMenu(d.value!="1"),B.ToggleSideBar()},Z=()=>{A.value.pic=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKpSURBVHgBtVZNbtNQEJ7xX1MctTZSabtL2XUXKrHoCvcG5QS9Apyg6Q1yBDgB3AB3gZBggZGQWCaVKqVKpMRNkzp1HD9mXhpoqjzbSuCToue8mTffm18bIQedTu9VmqaeEOghQoW2KveiUAgIAESAqL3b3nZ/ZNnBLILJRNTIuAcFQKS+rmNta8s9L0TUaDQc2944JQ/ewBJAFPXhUDvb23NDJVGr1aogrn0gL6qwGgLLwmPXdS9mG9rsgT35RySMahyLj41Gz5ltGLOHabjUJKO7GMLrIcTjMaSpgNKaBWW7RL91JZltp6e0vuU/MnTTyhK+6kR4PYCwP1woczZscDbLqqOgaehxgcjQCSFqKsXBMFKSyEuQjL1VgSuXV7y8bFdN0/iuUrxq9zINMUprJuw8e6qUs1eaZZknWUbySBjxOMmUpyl4FDqRWWUaIuSBiyMLlBpPy6o0hmUZkAcOXRZ4dHExOFlKzkYZ8lB+sp6nUtHyNEolS5aw+iI2lMu5RLJhm/B3Ii82Rn1i6DoMbiMqjrHMG4eUveWLFEBo0Jkm5amSp8m3LnLzRaABHVAxoA//H4GhaeBTnSvBfTQaxTJkyWQCSTKR+9SEYJmmDCHPO8tUV2eSwHvZJO129xOFz3tMwEO0SMMyeMg6m7ZcH4IjtrPjHsmqQ8TaTMDN1+31C42exxfjM93wZq6ByYEzXiURT1ciq3NYrjpd6A8iWBb9m1tpg22RN/XdXdf/Q8SgcJ91uv0gjhNYFWyDbUXR1Js5InrthlESv6ZABrAyRJCO8fjhd8PcZDh8sd+09OiIklaHZUEfJ5Z+d3Rw8Pxiblul/+XbL09HOKW0elDEPoA/ocQfvtz3FfJsfP76s2ro2gkKrApAmvTCuT/ZREFTBWUfnqsIZvgNl5on3QgDSKAAAAAASUVORK5CYII=",self.location).href},q=r=>{r?(A.value=Object.assign(A.value,r),A.value.pic=K.getUserAvatar({puid:r.puid}),i("initTab")):A.value=Object.assign(A.value,{pic:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKpSURBVHgBtVZNbtNQEJ7xX1MctTZSabtL2XUXKrHoCvcG5QS9Apyg6Q1yBDgB3AB3gZBggZGQWCaVKqVKpMRNkzp1HD9mXhpoqjzbSuCToue8mTffm18bIQedTu9VmqaeEOghQoW2KveiUAgIAESAqL3b3nZ/ZNnBLILJRNTIuAcFQKS+rmNta8s9L0TUaDQc2944JQ/ewBJAFPXhUDvb23NDJVGr1aogrn0gL6qwGgLLwmPXdS9mG9rsgT35RySMahyLj41Gz5ltGLOHabjUJKO7GMLrIcTjMaSpgNKaBWW7RL91JZltp6e0vuU/MnTTyhK+6kR4PYCwP1woczZscDbLqqOgaehxgcjQCSFqKsXBMFKSyEuQjL1VgSuXV7y8bFdN0/iuUrxq9zINMUprJuw8e6qUs1eaZZknWUbySBjxOMmUpyl4FDqRWWUaIuSBiyMLlBpPy6o0hmUZkAcOXRZ4dHExOFlKzkYZ8lB+sp6nUtHyNEolS5aw+iI2lMu5RLJhm/B3Ii82Rn1i6DoMbiMqjrHMG4eUveWLFEBo0Jkm5amSp8m3LnLzRaABHVAxoA//H4GhaeBTnSvBfTQaxTJkyWQCSTKR+9SEYJmmDCHPO8tUV2eSwHvZJO129xOFz3tMwEO0SMMyeMg6m7ZcH4IjtrPjHsmqQ8TaTMDN1+31C42exxfjM93wZq6ByYEzXiURT1ciq3NYrjpd6A8iWBb9m1tpg22RN/XdXdf/Q8SgcJ91uv0gjhNYFWyDbUXR1Js5InrthlESv6ZABrAyRJCO8fjhd8PcZDh8sd+09OiIklaHZUEfJ5Z+d3Rw8Pxiblul/+XbL09HOKW0elDEPoA/ocQfvtz3FfJsfP76s2ro2gkKrApAmvTCuT/ZREFTBWUfnqsIZvgNl5on3QgDSKAAAAAASUVORK5CYII=",self.location).href,name:g("login")})},F=X(()=>{if(R.value=="en_US")return{padding:`${Number(d.value)==1?"0 10px 0 10px":"0 6px 0 3px"}`}}),z=X(()=>{if(R.value=="en_US")return{padding:"11px 4px"}}),O=X(()=>{if(R.value=="en_US")return{fontSize:`${Number(d.value)==1?"12px":"10px"}`,textAlign:"center"}}),V=X(()=>{if(R.value=="en_US"&&Number(d.value)==1)return{right:"0px",top:"14px"};if(R.value=="en_US"&&Number(d.value)!=1)return{top:"5px"}});return(r,D)=>{const W=te;return c(),h("div",{class:x(["aside",w(d)=="1"?"":"aside_hide"]),style:C(w(F))},[a("div",{class:"aside_avator",onClick:n},[a("div",be,[a("img",{ref_key:"avatorImgRef",ref:b,src:A.value.pic,alt:"",referrerPolicy:"no-referrer",onError:Z},null,40,Re)]),a("div",ye,_(A.value.name||""),1)]),a("div",Te,[(c(!0),h(ue,null,we(w(H),(y,J)=>(c(),h("div",{class:x(["aside_menu_item",w(U).id==y.id?"aside_menu_item_active":"",y.id==="tab_setting"?"aside_menu_item_setting":""]),key:J,onClick:j=>s(y),style:C(w(z))},[L(W,{"icon-class":y.icon,width:w(d)=="1"?"16px":"20px",height:w(d)=="1"?"16px":"20px",color:w(U).id==y.id?"#fff":"#ACB4BF"},null,8,["icon-class","width","height","color"]),a("div",{class:"aside_menu_item_name",style:C(w(O))},_(y.name),5),y.id=="tab_message"?N((c(),h("div",{key:0,class:x(["badge"]),style:C(w(V))},[a("div",{class:x(["text",p.value?"":"lineHeight16",t.value>99?"b-number":""])},_(t.value>99?"99+":t.value),3)],4)),[[E,t.value]]):f("",!0),y.id=="tab_cloud_disk"?N((c(),h("div",Me,null,512)),[[E,S.value>0]]):f("",!0)],14,Le))),128))]),a("div",Be,[a("div",{class:"aside_tool",onClick:v},[w(d)=="1"?(c(),Q(W,{key:0,"icon-class":"arrow_l",width:"8px",height:"8px"})):(c(),Q(W,{key:1,"icon-class":"arrow_r",width:"8px",height:"8px"}))])])],6)}}});const He=ne(Ue,[["__scopeId","data-v-bdb1e5e8"]]),ae=I=>(ge("data-v-c63088eb"),I=I(),Ae(),I),xe={class:"window_search"},Ce=["placeholder"],Ie={class:"search_input_prefix"},We={class:"window_btn_text"},ke=["onClick"],Ne={class:"top"},Ee={key:0,class:"file_name"},Ze={key:0,class:"files"},Oe={key:0,class:"name_count"},Qe={key:1,class:"file_name"},De={key:0},Je={key:1},Ke={key:2},Xe={key:3},qe={class:"bottom"},je={class:"windows_icon_down"},Pe={class:"tip"},Fe=ae(()=>a("div",{class:"arrow"},null,-1)),ze={class:"download_btn"},Ve=ae(()=>a("i",{class:"red_icon"},null,-1)),Ge={key:0,class:"window_controls"},Ye=Y({__name:"index",setup(I){const{t:i}=$(),M=window.RendererHelper.getPlatform()!="darwin",B=u("main_close"),d=u(!1),g=u(!1),p=u(!0),U=u(!1),H=u(!1),t=u([]),S=u(!1),b=u(""),R=u(null),A=u(null),s=u(null);ee(async()=>{window.RendererHelper.on("maximize",()=>{U.value=!0}),window.RendererHelper.on("unmaximize",()=>{U.value=!1}),b.value=await window.MainWindowHelper.getLanguage(),Z(),M&&window.addEventListener("resize",n)}),pe(()=>{M&&window.removeEventListener("resize",n)});const n=()=>{if(M&&R.value){const{width:e}=R.value.getBoundingClientRect();let o;if(e<1160){if(A.value==null)return;o=210}else o=240;const l=document.querySelector(".el-progress-bar__outer");A.value&&(A.value.style.width=`${o}px`),l&&(l.style.width=`${o}px`)}},v=X(()=>{if(b.value=="en_US")return{left:"-92px"}}),Z=async()=>{await window.MainWindowHelper.loadDownloadList().then(e=>{t.value=e,t.value.sort(function(o,l){return l.startTime-o.startTime})})};window.RendererHelper.on("downloadChannel",e=>{console.log("downloadChannel",e),n(),e.type==="downloadListChanged"&&(t.value=e.data,t.value.sort(function(o,l){return l.startTime-o.startTime}),p.value=!1,t.value.length==0&&(d.value=!1)),e.type==="downloadStateChanged"&&(Z(),e.data.state==1?window.RendererHelper.toast(i("header.startDownloading"),{title:"",width:b.value=="en_US"?180:100,height:48,top:200,backgroundColor:"rgba(79, 87, 98, 0.98)",duration:2e3,position:"inWindow",winConfig:{id:"downloadToast"}}):e.data.state==4?window.RendererHelper.toast(`${e.data.title}`,{title:"",width:b.value=="en_US"?330:260,height:48,top:200,backgroundColor:"rgba(79, 87, 98, 0.98)",duration:2e3,icon:"download_success",position:"inWindow",contentTip:i("header.succDownload"),winConfig:{id:"downloadToast"}}):e.data.state==6&&window.RendererHelper.toast(`${e.data.title}`,{title:"",width:b.value=="en_US"?330:260,height:48,top:200,backgroundColor:"rgba(79, 87, 98, 0.98)",duration:2e3,icon:"download_fail",position:"inWindow",contentTip:i("header.failDownload"),winConfig:{id:"downloadToast"}}),t.value=t.value.map(o=>o.id===e.data.id?{...o,state:e.data.state}:o),t.value.some(o=>o.state==3||o.state===1)?d.value=!0:(d.value=!0,(e.data.state==4||e.data.state==6)&&(setTimeout(()=>{p.value=!0},1e3),setTimeout(()=>{p.value?(d.value=!1,g.value=!0):g.value=!1},5e3)))),e.type==="downloadProgressChanged"&&t.value.forEach((o,l)=>{o.id===e.data.id&&(t.value[l].receivedBytes=e.data.receivedBytes)})});const q=()=>t.value.some(e=>e.state===3||e.state===1||e.state===9)?i("header.downloading"):t.value.some(e=>e.state===2)?i("header.paused"):t.value.every(e=>e.state===6)?i("header.failDownload"):t.value.every(e=>e.state===4)?i("header.succDownload"):i("header.comDownload"),F=()=>{let e=t.value.filter(m=>m.state==1||m.state==2||m.state==3),o=e.reduce((m,T)=>m+T.receivedBytes,0),l=e.reduce((m,T)=>m+T.totalSize,0);return o==0?0:o/l*100},z=()=>{let e=t.value.some(l=>l.state==3),o=t.value.some(l=>l.state==2);return!!(e||o)},O=()=>t.value.filter(l=>l.state!==4).filter(l=>l.state!==6).length,V=()=>{let e;e=t.value.filter(m=>m.state!==4);let o=e.some(m=>m.state==2),l=e.some(m=>m.state==3);return o&&!l&&(e=e.filter(m=>m.state==2)),e},r=()=>{S.value=!0},D=()=>{S.value=!1},W=()=>{window.MainWindowHelper.openDownloadCenter()},y=()=>{g.value=!1,window.MainWindowHelper.openDownloadCenter()},J=()=>{g.value=!1,d.value=!0,p.value=!1,window.MainWindowHelper.openDownloadCenter()},j=()=>{H.value=!1,window.RendererHelper.minWindow()},G=()=>{window.RendererHelper.maxOrResotreWindow()},k=()=>{window.RendererHelper.closeWindow(),window.RendererHelper.sendToOtherWindow("CLOSE_MAIN_WINDOW","id_DownloadCenter")},ie=()=>{window.MainWindowHelper.appIsLogin().then(e=>{if(e)window.MainWindowHelper.openWindowWidthMask({url:"https://homepage.chaoxing.com/inviteCode",width:440,height:360,id:"inviteCode"});else{window.MainWindowHelper.openLoginPage();return}})},le=()=>{window.RendererHelper.openWindowWithTab("https://m.chaoxing.com/search/redirect?backurl=https%3A%2F%2Fm.chaoxing.com%2Fxxtpc%2F",{width:980,height:640,frame:!1,id:"searchResource"})};return(e,o)=>{const l=te,m=_e;return c(),h("div",{class:"window",ref_key:"windowContainer",ref:R,onResize:n},[a("div",xe,[a("div",{class:"window_search_input",onClick:o[0]||(o[0]=T=>le())},[a("input",{type:"text",class:"search_input_inner",readonly:"",placeholder:w(i)("searchInformation"),spellcheck:"false"},null,8,Ce),a("span",Ie,[L(l,{"icon-class":"search",width:"13px",height:"13px",color:"#fff"})])]),a("div",{class:"window_search_btn",onClick:ie},[L(l,{"icon-class":"add",width:"14px",height:"14px"}),a("span",We,_(w(i)("invitationCode")),1)])]),a("div",{class:"download_controls",style:C({right:M?"120px":"10px"}),ref_key:"downloadContainer",ref:A},[N(a("div",{class:"download_progress",onClick:P(J,["stop"])},[a("div",Ne,[L(l,{"icon-class":"download_progress","class-name":"download-icon",width:"18px",height:"18px"}),t.value.length>1?(c(),h("div",Ee,[a("span",null,_(q()),1),O()!=0?(c(),h("div",Ze,[a("div",{class:x([O()>1?"name":"name1"]),ref_key:"nameOne",ref:s,style:C(b.value=="en_US"?{width:"110px"}:{})},_(V()[0].title),7),O()>1?(c(),h("div",Oe,_(w(i)("header.wait"))+_(O())+_(w(i)("header.files")),1)):f("",!0)])):f("",!0)])):f("",!0),t.value.length==1?(c(),h("div",Qe,[t.value[0].state==3?(c(),h("span",De,_(w(i)("header.downloading")),1)):f("",!0),t.value[0].state==4?(c(),h("span",Je,_(w(i)("header.succDownload")),1)):f("",!0),t.value[0].state==6?(c(),h("span",Ke,_(w(i)("header.failDownload")),1)):f("",!0),t.value[0].state==2?(c(),h("span",Xe,_(w(i)("header.paused")),1)):f("",!0),t.value.length==1?(c(),h("span",{key:4,class:"file_one",style:C(t.value[0].state==3||t.value[0].state==2?{}:{width:0})},_(t.value[0].state==3||t.value[0].state==2?t.value[0].title:""),5)):f("",!0)])):f("",!0),L(l,{"icon-class":"del_progress",width:"18px",height:"18px",color:"#ACB4BF",style:{cursor:"pointer"},class:"del_progress",onClick:o[1]||(o[1]=P(T=>d.value=!1,["stop"]))})]),a("div",qe,[z()?(c(),Q(m,{key:0,strokeWidth:2,percentage:F()},null,8,["percentage"])):f("",!0)])],8,ke),[[E,d.value]]),N(a("div",je,[a("div",{class:"download_btn",onClick:W,onMouseenter:o[2]||(o[2]=T=>r()),onMouseleave:o[3]||(o[3]=T=>D())},[L(l,{"icon-class":"download_icon","class-name":"icon-size",width:"18px",height:"18px",color:"#FFFFFFB2"})],32),N(a("div",{class:"tooltip",style:C(w(v))},[a("div",Pe,_(w(i)("header.myDownloadcen")),1),Fe],4),[[E,S.value]])],512),[[E,!d.value&&!g.value]]),N(a("div",{class:"tip_icon",onClick:y},[a("div",ze,[L(l,{"icon-class":"download_progress","class-name":"download-icon",width:"18px",height:"18px"}),Ve])],512),[[E,!d.value&&g.value]])],4),M?(c(),h("div",Ge,[a("div",{class:x(["windows_icon_bg",H.value?"mini_icon_hover":""]),onClick:j,onMouseenter:o[4]||(o[4]=P(T=>H.value=!0,["stop"])),onMouseleave:o[5]||(o[5]=P(T=>H.value=!1,["stop"]))},[L(l,{"icon-class":"mini","class-name":"icon-size",width:"12px",height:"12px",color:"#c1c5cd"})],34),a("div",{class:"windows_icon_bg windows_icon_bg_hover",onClick:G},[U.value?(c(),Q(l,{key:0,"icon-class":"reduction","class-name":"icon-size",width:"12px",height:"12px",color:"#c1c5cd"})):(c(),Q(l,{key:1,"icon-class":"mix","class-name":"icon-size",width:"12px",height:"12px",color:"#c1c5cd"}))]),a("div",{class:"windows_icon_bg windows_icon_bg_hover close_icon",onClick:k,onMouseover:o[6]||(o[6]=T=>B.value="close_hover"),onMouseleave:o[7]||(o[7]=T=>B.value="main_close")},[L(l,{"icon-class":B.value,"class-name":"icon-size",width:"12px",height:"12px",color:B.value=="close_hover"?"#fff":"#c1c5cd"},null,8,["icon-class","color"])],32)])):f("",!0)],544)}}});const $e=ne(Ye,[["__scopeId","data-v-c63088eb"]]),en={class:"wrapper"},nn={class:"warpper_main"},on=Y({__name:"index",setup(I){const{t:i}=$(),M=se(),{sidebarStatus:B}=oe(M);he(),window.RendererHelper.setBlockRefresh(!0);const d=u("normal"),g=ve([{name:i("menuList.home"),icon:"home",hasLogin:!1,id:"tab_home"},{name:i("menuList.message"),icon:"message",hasLogin:!0,id:"tab_message"},{name:i("menuList.note"),icon:"note",hasLogin:!0,id:"tab_note"},{name:i("menuList.class"),icon:"class",hasLogin:!0,id:"tab_course"},{name:i("menuList.cloudDisk"),icon:"cloud_disk",hasLogin:!0,id:"tab_cloud_disk"},{name:i("menuList.group"),icon:"group",hasLogin:!0,id:"tab_group"},{name:i("menuList.setting"),icon:"setting",hasLogin:!0,id:"tab_setting"}]),p=u(g[0]);window.RendererHelper.setTempStore("currentMenuItemId",p.value.id),me(p,s=>{window.RendererHelper.setTempStore("currentMenuItemId",s.id)});const U=u(),H=u(!0);window.MainWindowHelper.getAppSystemConfig().then(s=>{if((s==null?void 0:s.appMode)=="classroom"){d.value="classroom";let n=g.filter(v=>v.id=="tab_course");if(n&&n.length>0){let v=n[0];window.MainWindowHelper.showTab(v.id,v.reload,v.hasLogin)}}console.log("getAppSystemConfig:",s)}),window.RendererHelper.on("window_show_header",s=>{console.log("window_show_header:",s),H.value=s});const t=fe.debounce(()=>{window.RendererHelper.sendToView("REFRESH_REPLY_ME","tab_message"),window.RendererHelper.sendToView("AI_SERVICE_TOAST","tab_message")},500),S=async(s,n)=>{const v=p.value;p.value=s,U.value=s,s.id=="tab_message"&&t();const Z=await window.MainWindowHelper.getTopTabId();s.id==="tab_message"&&Z==="tab_message_sub"?(window.RendererHelper.sendToView("TAB_MESSAGE_GESTURE","tab_message",{gesture:"click_tab"}),console.log("调用:click_tab,openChatPage"),window.MainWindowHelper.openChatPage()):(s.id=="tab_message"&&(v==null?void 0:v.id)=="tab_message"&&(window.RendererHelper.sendToView("TAB_MESSAGE_GESTURE","tab_message",{gesture:"switch_tab"}),console.log("调用:switch_tab,openChatPage"),window.MainWindowHelper.openChatPage()),console.log("linkTo:showTab,tabId:",s.id,"hasLogin:"+s.hasLogin),window.MainWindowHelper.showTab(s.id,s.reload,s.hasLogin))},b=async()=>{let s=g.filter(n=>n.id=="tab_message");if(s&&s.length>0){let n=s[0];console.log("登录完成后:showTab,tabId:",n.id,"hasLogin:"+n.hasLogin),window.MainWindowHelper.showTab(n.id,n.reload,n.hasLogin)}d.value=="classroom"?await window.MainWindowHelper.appIsLogin()?setTimeout(function(){p.value={name:i("menuList.class"),icon:"class",hasLogin:!0,id:"tab_course"},S(p.value)},200):window.MainWindowHelper.showTab("tab_empty",!1,!1):setTimeout(function(){p.value=U.value||g[0],S(p.value)},200)},R=()=>{window.RendererHelper.isAppPackaged().then(s=>{})};setTimeout(async()=>{d.value=="classroom"?await window.MainWindowHelper.appIsLogin()?setTimeout(function(){p.value={name:i("menuList.class"),icon:"class",hasLogin:!0,id:"tab_course"},S(p.value)},200):window.MainWindowHelper.showTab("tab_empty",!1,!1):S(p.value)},500),R();function A(s){for(let n=0;n<g.length;n++)if(g[n].id==s)return g[n]}return window.RendererHelper.on("changeTab",(s,n)=>{let v=A(s);v&&S(v)}),window.RendererHelper.on("menuTabSelectChanged",s=>{console.log("tabid:",s);let n=g.find(v=>v.id==s);n&&(p.value=n)}),ee(async()=>{if(document.addEventListener("contextmenu",n=>n.preventDefault()),window.addEventListener("offline",async()=>{const n=await window.RendererHelper.pingHost();n!=null&&n.alive||window.MainWindowHelper.visibleNetStateView(!0,1)}),!await window.RendererHelper.isNetOnline()){const n=await window.RendererHelper.pingHost();n!=null&&n.alive||window.MainWindowHelper.visibleNetStateView(!0,1)}window.RendererHelper.onStoreDataChanged("mainWindowStateChanged",async n=>{n=="restore"&&(await window.RendererHelper.isNetOnline()||window.MainWindowHelper.visibleNetStateView(!0,1))})}),(s,n)=>(c(),h("div",en,[H.value?(c(),Q($e,{key:0})):f("",!0),a("div",nn,[N(L(He,{"menu-list":g,"current-menu":p.value,onOpenTab:S,onInitTab:b},null,8,["menu-list","current-menu"]),[[E,d.value!="classroom"]]),a("div",{class:x(["warpper_main_view",w(B)?"width120":"width60"])},null,2)])]))}});const un=ne(on,[["__scopeId","data-v-f91fca65"]]);export{un as default};
