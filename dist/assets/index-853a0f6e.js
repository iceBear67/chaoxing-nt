import{c as W,a as te}from"./index-9c66cebd.js";import{a as M,aH as Z,r as v,c as k,P as le,Y,l as L,i as D,I as J,w as ae,e as $,j as N,h as y,y as oe,k as j,v as se,U as re,b as Q,m as X,F as ne,C as V,n as q,Z as ie,B as ce,aR as ue,o as fe,a_ as ve,G as de,R as me,p as pe}from"./index-26603ea5.js";import{d as I,_ as K,u as ee,e as he,g as be,j as R,r as F,o as ge,w as ye}from"./base-82955267.js";import{t as Se,u as we}from"./index-15f48857.js";const T=4,ze={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},_e=({move:h,size:d,bar:o})=>({[o.size]:d,transform:`translate${o.axis}(${h}%)`}),U=Symbol("scrollbarContextKey"),Ee=I({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),He="Thumb",Te=M({__name:"thumb",props:Ee,setup(h){const d=h,o=Z(U),a=ee("scrollbar");o||Se(He,"can not inject scrollbar context");const u=v(),m=v(),b=v({}),c=v(!1);let r=!1,n=!1,g=0,H=0,t=he?document.onselectstart:null;const l=k(()=>ze[d.vertical?"vertical":"horizontal"]),p=k(()=>_e({size:d.size,move:d.move,bar:l.value})),w=k(()=>u.value[l.value.offset]**2/o.wrapElement[l.value.scrollSize]/d.ratio/m.value[l.value.offset]),E=i=>{var f;if(i.stopPropagation(),i.ctrlKey||[1,2].includes(i.button))return;(f=window.getSelection())==null||f.removeAllRanges(),_(i);const e=i.currentTarget;e&&(b.value[l.value.axis]=e[l.value.offset]-(i[l.value.client]-e.getBoundingClientRect()[l.value.direction]))},z=i=>{if(!m.value||!u.value||!o.wrapElement)return;const f=Math.abs(i.target.getBoundingClientRect()[l.value.direction]-i[l.value.client]),e=m.value[l.value.offset]/2,s=(f-e)*100*w.value/u.value[l.value.offset];o.wrapElement[l.value.scroll]=s*o.wrapElement[l.value.scrollSize]/100},_=i=>{i.stopImmediatePropagation(),r=!0,g=o.wrapElement.scrollHeight,H=o.wrapElement.scrollWidth,document.addEventListener("mousemove",P),document.addEventListener("mouseup",C),t=document.onselectstart,document.onselectstart=()=>!1},P=i=>{if(!u.value||!m.value||r===!1)return;const f=b.value[l.value.axis];if(!f)return;const e=(u.value.getBoundingClientRect()[l.value.direction]-i[l.value.client])*-1,s=m.value[l.value.offset]-f,S=(e-s)*100*w.value/u.value[l.value.offset];l.value.scroll==="scrollLeft"?o.wrapElement[l.value.scroll]=S*H/100:o.wrapElement[l.value.scroll]=S*g/100},C=()=>{r=!1,b.value[l.value.axis]=0,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",C),x(),n&&(c.value=!1)},B=()=>{n=!1,c.value=!!d.size},O=()=>{n=!0,c.value=r};le(()=>{x(),document.removeEventListener("mouseup",C)});const x=()=>{document.onselectstart!==t&&(document.onselectstart=t)};return W(Y(o,"scrollbarElement"),"mousemove",B),W(Y(o,"scrollbarElement"),"mouseleave",O),(i,f)=>(L(),D(re,{name:y(a).b("fade"),persisted:""},{default:J(()=>[ae($("div",{ref_key:"instance",ref:u,class:N([y(a).e("bar"),y(a).is(y(l).key)]),onMousedown:z,onClick:oe(()=>{},["stop"])},[$("div",{ref_key:"thumb",ref:m,class:N(y(a).e("thumb")),style:j(y(p)),onMousedown:E},null,38)],42,["onClick"]),[[se,i.always||c.value]])]),_:1},8,["name"]))}});var G=K(Te,[["__file","thumb.vue"]]);const ke=I({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Ce=M({__name:"bar",props:ke,setup(h,{expose:d}){const o=h,a=Z(U),u=v(0),m=v(0),b=v(""),c=v(""),r=v(1),n=v(1);return d({handleScroll:t=>{if(t){const l=t.offsetHeight-T,p=t.offsetWidth-T;m.value=t.scrollTop*100/l*r.value,u.value=t.scrollLeft*100/p*n.value}},update:()=>{const t=a==null?void 0:a.wrapElement;if(!t)return;const l=t.offsetHeight-T,p=t.offsetWidth-T,w=l**2/t.scrollHeight,E=p**2/t.scrollWidth,z=Math.max(w,o.minSize),_=Math.max(E,o.minSize);r.value=w/(l-w)/(z/(l-z)),n.value=E/(p-E)/(_/(p-_)),c.value=z+T<l?`${z}px`:"",b.value=_+T<p?`${_}px`:""}}),(t,l)=>(L(),Q(ne,null,[X(G,{move:u.value,ratio:n.value,size:b.value,always:t.always},null,8,["move","ratio","size","always"]),X(G,{move:m.value,ratio:r.value,size:c.value,vertical:"",always:t.always},null,8,["move","ratio","size","always"])],64))}});var Re=K(Ce,[["__file","bar.vue"]]);const Le=I({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:be([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...we(["ariaLabel","ariaOrientation"])}),Ne={"end-reached":h=>["left","right","top","bottom"].includes(h),scroll:({scrollTop:h,scrollLeft:d})=>[h,d].every(R)},Pe="ElScrollbar",Be=M({name:Pe}),xe=M({...Be,props:Le,emits:Ne,setup(h,{expose:d,emit:o}){const a=h,u=ee("scrollbar");let m,b,c=0,r=0,n="";const g={bottom:!1,top:!1,right:!1,left:!1},H=v(),t=v(),l=v(),p=v(),w=k(()=>{const e={};return a.height&&(e.height=F(a.height)),a.maxHeight&&(e.maxHeight=F(a.maxHeight)),[a.wrapStyle,e]}),E=k(()=>[a.wrapClass,u.e("wrap"),{[u.em("wrap","hidden-default")]:!a.native}]),z=k(()=>[u.e("view"),a.viewClass]),_=e=>{var s;return(s=g[e])!=null?s:!1},P={top:"bottom",bottom:"top",left:"right",right:"left"},C=e=>{const s=P[n];if(!s)return;const S=e[n],A=e[s];S&&!g[n]&&(g[n]=!0),!A&&g[s]&&(g[s]=!1)},B=()=>{var e;if(t.value){(e=p.value)==null||e.handleScroll(t.value);const s=c,S=r;c=t.value.scrollTop,r=t.value.scrollLeft;const A={bottom:c+t.value.clientHeight>=t.value.scrollHeight-a.distance,top:c<=a.distance&&s!==0,right:r+t.value.clientWidth>=t.value.scrollWidth-a.distance&&S!==r,left:r<=a.distance&&S!==0};if(o("scroll",{scrollTop:c,scrollLeft:r}),s!==c&&(n=c>s?"bottom":"top"),S!==r&&(n=r>S?"right":"left"),a.distance>0){if(_(n))return;C(A)}A[n]&&o("end-reached",n)}};function O(e,s){ge(e)?t.value.scrollTo(e):R(e)&&R(s)&&t.value.scrollTo(e,s)}const x=e=>{R(e)&&(t.value.scrollTop=e)},i=e=>{R(e)&&(t.value.scrollLeft=e)},f=()=>{var e;(e=p.value)==null||e.update(),g[n]=!1};return V(()=>a.noresize,e=>{e?(m==null||m(),b==null||b()):({stop:m}=te(l,f),b=W("resize",f))},{immediate:!0}),V(()=>[a.maxHeight,a.height],()=>{a.native||q(()=>{var e;f(),t.value&&((e=p.value)==null||e.handleScroll(t.value))})}),ie(U,ce({scrollbarElement:H,wrapElement:t})),ue(()=>{t.value&&(t.value.scrollTop=c,t.value.scrollLeft=r)}),fe(()=>{a.native||q(()=>{f()})}),ve(()=>f()),d({wrapRef:t,update:f,scrollTo:O,setScrollTop:x,setScrollLeft:i,handleScroll:B}),(e,s)=>(L(),Q("div",{ref_key:"scrollbarRef",ref:H,class:N(y(u).b())},[$("div",{ref_key:"wrapRef",ref:t,class:N(y(E)),style:j(y(w)),tabindex:e.tabindex,onScroll:B},[(L(),D(me(e.tag),{id:e.id,ref_key:"resizeRef",ref:l,class:N(y(z)),style:j(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:J(()=>[de(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),e.native?pe("v-if",!0):(L(),D(Re,{key:0,ref_key:"barRef",ref:p,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Ae=K(xe,[["__file","scrollbar.vue"]]);const $e=ye(Ae);export{$e as E,Ne as s};
