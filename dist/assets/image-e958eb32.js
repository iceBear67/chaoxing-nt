import{j as i,k as c}from"./message-fe5b63d1.js";import{b as f}from"./forward-bb18e89e.js";const p="https://pan-yz.chaoxing.com/preview/showpreview";async function E(t){return t&&(l(t)?(await f.get(t)).request.responseURL:t)}function l(t){return t?t.startsWith(p):!1}function m(t){return console.log("[tempUrlToBase64] call"),new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){if(this.status===200){const s=new Uint8Array(this.response);let o="";for(let a=0;a<s.byteLength;a++)o+=String.fromCharCode(s[a]);const u=`data:image/png;base64,${btoa(o)}`;e(u)}},r.onerror=function(s){console.error(s),n(new Error("Failed to convert temp URL to base64"))},r.send()})}function R(t){console.log("[imageToBase64] call");const e=document.createElement("canvas");e.width=t.naturalWidth,e.height=t.naturalHeight;const n=e.getContext("2d");return n?(n.drawImage(t,0,0),e.toDataURL("image/png")):""}function d(t){return t&&(t.startsWith(i)?t.replace(i,""):t.startsWith(c)?t.replace(c,""):t)}export{l as a,d as c,E as g,R as i,m as t};
