import{a as A,u as E,r as i,o as $,C as k,b as u,F as I,g as q,k as U,h as V,l as c,i as Y,I as G,m as J,e as K,f as P,j as Q,R as X,p as Z,_ as ee,q as ne}from"./index-26603ea5.js";const ae={class:"msg_name"},oe={key:0,class:"divider"},ie=A({__name:"index",setup(te){const{t:n}=E(),b=i(""),w=i(),g=i(-1);let l=i(!1),d=i(!0),m=i(!0),p=i(!0),v=i(!0),r=i(!1);const a=i([{component:"li",icon:"forward",name:n("message.forward"),action:W,visible:!0},{component:"li",icon:"refresh",name:n("message.refresh"),action:L,visible:!0},{component:"li",icon:"link",name:n("message.copyLink"),action:R,visible:!0},{component:"li",icon:"jump",name:n("message.openInYourBrowser"),action:F,visible:!0},{component:"li",icon:"report",name:n("message.report"),action:D,visible:!0},{component:"li",icon:l.value?"unpin_tab":"fixed_tab",name:l.value?n("message.unpinTab"):n("message.fixedTab"),action:l.value?x:C,visible:r.value},{component:"li",icon:"close_tab",name:n("message.closeTab"),action:O,visible:r.value},{component:"li",icon:"close_other_tabs",name:n("message.closeOtherTabs"),action:S,visible:d.value},{component:"li",icon:"close_left_tab",name:n("message.closeLeftTab"),action:N,visible:m.value},{component:"li",icon:"close_right_tab",name:n("message.closeRightTab"),action:j,visible:p.value}]);$(async()=>{b.value=await window.MainWindowHelper.getLanguage();const e=await window.RendererHelper.getInitDataAsync();M(e),document.addEventListener("contextmenu",function(o){o.preventDefault()}),window.RendererHelper.on("showRightClickMenu",o=>{M(o)})});function M(e){var o;console.log("updateMenuItems",e),l.value=e.isFixed||!1,d.value=e.canCloseOther||!1,m.value=e.canCloseLeft||!1,p.value=e.canCloseRight||!1,v.value=e.fromMainWindow||!1,r.value=e.isMainTab||!1,(o=w.value)==null||o.focus()}function B(e){a.value[5].icon=e?"unpin_tab":"fixed_tab",a.value[5].name=n(e?"message.unpinTab":"message.fixedTab"),a.value[5].action=e?x:C}k([l,d,m,p,r],([e,o,f,s,t])=>{B(e),a.value[4].visible=!t,a.value[5].visible=!t,a.value[6].visible=!t,a.value[7].visible=o,a.value[8].visible=f,a.value[9].visible=s},{deep:!0}),k(a,e=>{!v.value&&e.length>5&&(a.value=a.value.slice(0,-5))},{deep:!0});const h=e=>{g.value=e},T=e=>e===4;let _=null;const y=()=>{_=setTimeout(()=>{window.close()},300)},H=()=>{_&&clearTimeout(_)};function W(){window.MainWindowHelper.tabBarMenuItemClick("forward")}function L(){window.MainWindowHelper.tabBarMenuItemClick("refresh")}function R(){window.MainWindowHelper.tabBarMenuItemClick("copy_link")}function F(){window.MainWindowHelper.tabBarMenuItemClick("open_in_browser")}function D(){window.MainWindowHelper.tabBarMenuItemClick("report")}function C(){window.MainWindowHelper.tabBarMenuItemClick("fixed_tab")}function x(){window.MainWindowHelper.tabBarMenuItemClick("cancel_fixed_tab")}function O(){window.MainWindowHelper.tabBarMenuItemClick("close_tab")}function S(){window.MainWindowHelper.tabBarMenuItemClick("close_other_tab")}function N(){window.MainWindowHelper.tabBarMenuItemClick("close_left_tab")}function j(){window.MainWindowHelper.tabBarMenuItemClick("close_right_tab")}return(e,o)=>{const f=ee;return c(),u("div",{ref_key:"contanier",ref:w,tabindex:"1",class:"msg_box",onFocus:H,onBlur:y,style:U({width:b.value==="en_US"?"166px":"126px",height:V(v)?"310px":"144px"})},[(c(!0),u(I,null,q(a.value,(s,t)=>(c(),u(I,{key:t},[(c(),Y(X(s.component),{class:Q({disabled:!s.visible}),onClick:s.action,onMouseenter:z=>h(t),onMouseleave:o[0]||(o[0]=z=>h(-1))},{default:G(()=>[J(f,{"icon-class":s.icon,width:"12px",height:"12px",color:g.value===t?"#3A8BFF":"#474C59"},null,8,["icon-class","color"]),K("span",ae,P(s.name),1)]),_:2},1064,["class","onClick","onMouseenter"])),T(t)?(c(),u("div",oe)):Z("",!0)],64))),128))],36)}}});const le=ne(ie,[["__scopeId","data-v-af2f6fab"]]);export{le as default};
