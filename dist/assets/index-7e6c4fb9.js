import{a as z,m as N,G as P,aC as Ee,o as ce,bu as Te,P as Se,aH as ne,c as T,l as F,b as K,e as j,j as L,h as n,f as ke,I as M,i as Z,R as Pe,p as x,k as ue,a1 as Ie,C as U,aY as Be,r as O,n as Le,az as Me,E as De,Z as Ae,U as Oe,L as le,w as Fe,a0 as $e,v as Ne}from"./index-26603ea5.js";import{e as $,h as de,N as q,d as ee,g as V,u as oe,r as J,n as Q,_ as fe,y as ze,m as ae,t as Ye,s as Re,o as We,Q as _e,b as He,x as re,w as je}from"./base-82955267.js";import{P as G}from"./vnode-45baa450.js";import{F as Ue,t as Ve,E as Xe,a as Ke}from"./index-12f9ba11.js";import{E as qe}from"./index-952b158c.js";import{i as Ge,C as Ze}from"./icon-803f5cc0.js";import{u as xe}from"./index-e5f0a9f0.js";import{U as me}from"./event-9519ab40.js";import{t as Je}from"./index-15f48857.js";import{u as Qe}from"./index-57013d5d.js";import{u as ie}from"./index-08289d2b.js";import{c as eo}from"./use-global-config-c67545e0.js";import{u as oo}from"./index-f81182f6.js";const to=(e,t)=>{if(!$)return!1;const o={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],a=de(e,o);return["scroll","auto","overlay"].some(s=>a.includes(s))},No=(e,t)=>{if(!$)return;let o=e;for(;o;){if([window,document,document.documentElement].includes(o))return window;if(to(o,t))return o;o=o.parentNode}return o};let H;const so=e=>{var t;if(!$)return 0;if(H!==void 0)return H;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const a=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const c=s.offsetWidth;return(t=o.parentNode)==null||t.removeChild(o),H=a-c,H};function zo(e,t){if(!$)return;if(!t){e.scrollTop=0;return}const o=[];let a=t.offsetParent;for(;a!==null&&e!==a&&e.contains(a);)o.push(a),a=a.offsetParent;const s=t.offsetTop+o.reduce((i,f)=>i+f.offsetTop,0),c=s+t.offsetHeight,r=e.scrollTop,p=r+e.clientHeight;s<r?e.scrollTop=s:c>p&&(e.scrollTop=c-e.clientHeight)}const ve=e=>{if(!e)return{onClick:q,onMousedown:q,onMouseup:q};let t=!1,o=!1;return{onClick:r=>{t&&o&&e(r),t=o=!1},onMousedown:r=>{t=r.target===r.currentTarget},onMouseup:r=>{o=r.target===r.currentTarget}}},no=ee({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:V([String,Array,Object])},zIndex:{type:V([String,Number])}}),lo={click:e=>e instanceof MouseEvent},ao="overlay";var ro=z({name:"ElOverlay",props:no,emits:lo,setup(e,{slots:t,emit:o}){const a=oe(ao),s=i=>{o("click",i)},{onClick:c,onMousedown:r,onMouseup:p}=ve(e.customMaskEvent?void 0:s);return()=>e.mask?N("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:r,onMouseup:p},[P(t,"default")],G.STYLE|G.CLASS|G.PROPS,["onClick","onMouseup","onMousedown"]):Ee("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[P(t,"default")])}});const io=ro,pe=Symbol("dialogInjectionKey"),ye="dialog-fade",ge=ee({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ge},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),co={close:()=>!0},uo=(e,t,o,a)=>{const s={offsetX:0,offsetY:0},c=(m,y)=>{if(e.value){const{offsetX:g,offsetY:C}=s,w=e.value.getBoundingClientRect(),b=w.left,u=w.top,S=w.width,E=w.height,k=document.documentElement.clientWidth,I=document.documentElement.clientHeight,B=-b+g,D=-u+C,A=k-b-S+g,Y=I-u-(E<I?E:0)+C;a!=null&&a.value||(m=Math.min(Math.max(m,B),A),y=Math.min(Math.max(y,D),Y)),s.offsetX=m,s.offsetY=y,e.value.style.transform=`translate(${J(m)}, ${J(y)})`}},r=m=>{const y=m.clientX,g=m.clientY,{offsetX:C,offsetY:w}=s,b=S=>{const E=C+S.clientX-y,k=w+S.clientY-g;c(E,k)},u=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",u)},p=()=>{t.value&&e.value&&(t.value.addEventListener("mousedown",r),window.addEventListener("resize",h))},i=()=>{t.value&&e.value&&(t.value.removeEventListener("mousedown",r),window.removeEventListener("resize",h))},f=()=>{s.offsetX=0,s.offsetY=0,e.value&&(e.value.style.transform="")},h=()=>{const{offsetX:m,offsetY:y}=s;c(m,y)};return ce(()=>{Te(()=>{o.value?p():i()})}),Se(()=>{i()}),{resetPosition:f,updatePosition:h}},fo=(...e)=>t=>{e.forEach(o=>{Q(o)?o(t):o.value=t})},mo=z({name:"ElDialogContent"}),vo=z({...mo,props:ge,emits:co,setup(e,{expose:t}){const o=e,{t:a}=xe(),{Close:s}=Ze,{dialogRef:c,headerRef:r,bodyId:p,ns:i,style:f}=ne(pe),{focusTrapRef:h}=ne(Ue),m=T(()=>[i.b(),i.is("fullscreen",o.fullscreen),i.is("draggable",o.draggable),i.is("align-center",o.alignCenter),{[i.m("center")]:o.center}]),y=fo(h,c),g=T(()=>o.draggable),C=T(()=>o.overflow),{resetPosition:w,updatePosition:b}=uo(c,r,g,C);return t({resetPosition:w,updatePosition:b}),(u,S)=>(F(),K("div",{ref:n(y),class:L(n(m)),style:ue(n(f)),tabindex:"-1"},[j("header",{ref_key:"headerRef",ref:r,class:L([n(i).e("header"),u.headerClass,{"show-close":u.showClose}])},[P(u.$slots,"header",{},()=>[j("span",{role:"heading","aria-level":u.ariaLevel,class:L(n(i).e("title"))},ke(u.title),11,["aria-level"])]),u.showClose?(F(),K("button",{key:0,"aria-label":n(a)("el.dialog.close"),class:L(n(i).e("headerbtn")),type:"button",onClick:E=>u.$emit("close")},[N(n(qe),{class:L(n(i).e("close"))},{default:M(()=>[(F(),Z(Pe(u.closeIcon||n(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):x("v-if",!0)],2),j("div",{id:n(p),class:L([n(i).e("body"),u.bodyClass])},[P(u.$slots,"default")],10,["id"]),u.$slots.footer?(F(),K("footer",{key:0,class:L([n(i).e("footer"),u.footerClass])},[P(u.$slots,"footer")],2)):x("v-if",!0)],6))}});var po=fe(vo,[["__file","dialog-content.vue"]]);const yo=ee({...ge,appendToBody:Boolean,appendTo:{type:Ve.to.type,default:"body"},beforeClose:{type:V(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:V([String,Object]),default:ye}}),go={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[me]:e=>ze(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ho=(e,t={})=>{Ie(e)||Je("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||oe("popup"),a=T(()=>o.bm("parent","hidden"));if(!$||ae(document.body,a.value))return;let s=0,c=!1,r="0";const p=()=>{setTimeout(()=>{typeof document>"u"||c&&document&&(document.body.style.width=r,Re(document.body,a.value))},200)};U(e,i=>{if(!i){p();return}c=!ae(document.body,a.value),c&&(r=document.body.style.width,Ye(document.body,a.value)),s=so(o.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,h=de(document.body,"overflowY");s>0&&(f||h==="scroll")&&c&&(document.body.style.width=`calc(100% - ${s}px)`)}),Be(()=>p())},Co=(e,t)=>{var o;const s=Me().emit,{nextZIndex:c}=Qe();let r="";const p=ie(),i=ie(),f=O(!1),h=O(!1),m=O(!1),y=O((o=e.zIndex)!=null?o:c());let g,C;const w=eo("namespace",_e),b=T(()=>{const v={},d=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(v[`${d}-margin-top`]=e.top),e.width&&(v[`${d}-width`]=J(e.width))),v}),u=T(()=>e.alignCenter?{display:"flex"}:{}),S=T(()=>{const v={name:e.transition,onAfterEnter:E,onBeforeLeave:I,onAfterLeave:k};if(We(e.transition)){const d={...e.transition},X=(_,we)=>te=>{He(_)?_.forEach(se=>{Q(se)&&se(te)}):Q(_)&&_(te),we()};return d.onAfterEnter=X(d.onAfterEnter,E),d.onBeforeLeave=X(d.onBeforeLeave,I),d.onAfterLeave=X(d.onAfterLeave,k),d.name||(d.name=ye),d}return v});function E(){s("opened")}function k(){s("closed"),s(me,!1),e.destroyOnClose&&(m.value=!1)}function I(){s("close")}function B(){C==null||C(),g==null||g(),e.openDelay&&e.openDelay>0?{stop:g}=re(()=>l(),e.openDelay):l()}function D(){g==null||g(),C==null||C(),e.closeDelay&&e.closeDelay>0?{stop:C}=re(()=>R(),e.closeDelay):R()}function A(){function v(d){d||(h.value=!0,f.value=!1)}e.beforeClose?e.beforeClose(v):D()}function Y(){e.closeOnClickModal&&A()}function l(){$&&(f.value=!0)}function R(){f.value=!1}function W(){s("openAutoFocus")}function he(){s("closeAutoFocus")}function Ce(v){var d;((d=v.detail)==null?void 0:d.focusReason)==="pointer"&&v.preventDefault()}e.lockScroll&&ho(f);function be(){e.closeOnPressEscape&&A()}return U(()=>e.zIndex,()=>{var v;y.value=(v=e.zIndex)!=null?v:c()}),U(()=>e.modelValue,v=>{var d;v?(h.value=!1,B(),m.value=!0,y.value=(d=e.zIndex)!=null?d:c(),Le(()=>{s("open"),t.value&&(t.value.parentElement.scrollTop=0,t.value.parentElement.scrollLeft=0,t.value.scrollTop=0)})):f.value&&D()}),U(()=>e.fullscreen,v=>{t.value&&(v?(r=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=r)}),ce(()=>{e.modelValue&&(f.value=!0,m.value=!0,B())}),{afterEnter:E,afterLeave:k,beforeLeave:I,handleClose:A,onModalClick:Y,close:D,doClose:R,onOpenAutoFocus:W,onCloseAutoFocus:he,onCloseRequested:be,onFocusoutPrevented:Ce,titleId:p,bodyId:i,closed:h,style:b,overlayDialogStyle:u,rendered:m,visible:f,zIndex:y,transitionConfig:S}},bo=z({name:"ElDialog",inheritAttrs:!1}),wo=z({...bo,props:yo,emits:go,setup(e,{expose:t}){const o=e,a=De();oo({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},T(()=>!!a.title));const s=oe("dialog"),c=O(),r=O(),p=O(),{visible:i,titleId:f,bodyId:h,style:m,overlayDialogStyle:y,rendered:g,transitionConfig:C,zIndex:w,handleClose:b,onModalClick:u,onOpenAutoFocus:S,onCloseAutoFocus:E,onCloseRequested:k,onFocusoutPrevented:I}=Co(o,c);Ae(pe,{dialogRef:c,headerRef:r,bodyId:h,ns:s,rendered:g,style:m});const B=ve(u),D=T(()=>o.draggable&&!o.fullscreen),A=T(()=>o.modalPenetrable&&!o.modal&&!o.fullscreen);return t({visible:i,dialogContentRef:p,resetPosition:()=>{var l;(l=p.value)==null||l.resetPosition()},handleClose:b}),(l,R)=>(F(),Z(n(Ke),{to:l.appendTo,disabled:l.appendTo!=="body"?!1:!l.appendToBody},{default:M(()=>[N(Oe,le(n(C),{persisted:""}),{default:M(()=>{var W;return[Fe(N(n(io),{"custom-mask-event":"",mask:l.modal,"overlay-class":[(W=l.modalClass)!=null?W:"",`${n(s).namespace.value}-modal-dialog`,n(s).is("penetrable",n(A))],"z-index":n(w)},{default:M(()=>[j("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:n(f),"aria-describedby":n(h),class:L(`${n(s).namespace.value}-overlay-dialog`),style:ue(n(y)),onClick:n(B).onClick,onMousedown:n(B).onMousedown,onMouseup:n(B).onMouseup},[N(n(Xe),{loop:"",trapped:n(i),"focus-start-el":"container",onFocusAfterTrapped:n(S),onFocusAfterReleased:n(E),onFocusoutPrevented:n(I),onReleaseRequested:n(k)},{default:M(()=>[n(g)?(F(),Z(po,le({key:0,ref_key:"dialogContentRef",ref:p},l.$attrs,{center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:n(D),overflow:l.overflow,fullscreen:l.fullscreen,"header-class":l.headerClass,"body-class":l.bodyClass,"footer-class":l.footerClass,"show-close":l.showClose,title:l.title,"aria-level":l.headerAriaLevel,onClose:n(b)}),$e({header:M(()=>[l.$slots.title?P(l.$slots,"title",{key:1}):P(l.$slots,"header",{key:0,close:n(b),titleId:n(f),titleClass:n(s).e("title")})]),default:M(()=>[P(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:M(()=>[P(l.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):x("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Ne,n(i)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var Eo=fe(wo,[["__file","dialog.vue"]]);const Yo=je(Eo);export{Yo as E,No as g,zo as s};
